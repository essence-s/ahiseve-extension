const c={ELEMENT_ACTION:"ELEMENT_ACTION",GET_VIDEOS_DATA:"GET_VIDEOS_DATA",RESULT_VIDEOS_DATA:"RESULT_VIDEOS_DATA",GET_TABS:"GET_TABS",RESULT_TABS:"RESULT_TABS",CHECK_ELEMENT_VIDEO_SELECTED:"CHECK_ELEMENT_VIDEO_SELECTED",RESULT_CHECK_ELEMENT_VIDEO_SELECTED:"RESULT_CHECK_ELEMENT_VIDEO_SELECTED",ADD_EVENTS_ELEMENT:"ADD_EVENTS_ELEMENT",REMOVE_EVENTS_ELEMENTS:"REMOVE_EVENTS_ELEMENTS",CHECK_CONNECTION:"CHECK_CONNECTION"},T=e=>new Promise((s,r)=>{chrome.runtime.sendMessage(e,E=>{chrome.runtime.lastError?r(chrome.runtime.lastError.message):s(E)})}),a=(e,s)=>new Promise((r,E)=>{chrome.tabs.sendMessage(parseInt(e),s,t=>{chrome.runtime.lastError?E(chrome.runtime.lastError.message):r(t)})}),i=e=>{window.postMessage(e,"*")},o={},_=async e=>{if(!e)return"";if(o[e])return o[e];try{const s=await fetch(e);if(!s.ok)return"";const r=await s.blob(),E=new FileReader,t=await new Promise(n=>{E.onloadend=()=>n(E.result),E.readAsDataURL(r)});return o[e]=t,t}catch{return""}},l=()=>new Promise((e,s)=>{try{chrome.tabs.query({},function(r){Promise.all(r.map(async E=>{const t=await _(E.favIconUrl);return{id:E.id,favIconUrl:t,title:E.title,url:E.url}})).then(E=>e(E))})}catch(r){console.log(r),s(r)}}),S=(e,s)=>new Promise((r,E)=>{a(parseInt(e),s).then(t=>{console.log("Mensaje enviado:",t),r(t)}).catch(t=>{console.log("Error al enviar mensaje:",t),browser.scripting.executeScript({target:{tabId:parseInt(e),allFrames:!0},files:["content.bundle.js"]}).then(()=>{console.log("script injected in all jaus"),a(parseInt(e),s).then(n=>{console.log("Mensaje enviado:",n),r(n)}).catch(n=>{console.log("Error al enviar mensaje 2:",n),E(n)})})})});export{a,T as i,S as n,c as o,i as r,l as t};
