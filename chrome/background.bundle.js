import{a as n,n as l,o as t,t as s}from"./util-CtUzdBzx.js";chrome.runtime.onInstalled.addListener(()=>{console.log("installed")}),chrome.tabs.query({url:["https://ahiseve.vercel.app/*","http://localhost:4321/*"]},a=>{a.forEach(e=>{n(e.id,{cmd:t.CHECK_CONNECTION}).then(c=>{c.message=="connected"&&console.log(c,"ya esta conectado")}).catch(c=>{chrome.scripting.executeScript({target:{tabId:parseInt(e.id)},files:["content.bundle.js"]}).then(()=>{console.log("script injected")})})})});let o={};function E(){return new Promise(a=>{Object.keys(o).length==0?chrome.storage.local.get(["dataG"],function(e){e.dataG&&(o=JSON.parse(e.dataG)),a("")}):a("")})}chrome.runtime.onMessage.addListener(function(a,e,c){return E().then(async()=>{if(a.cmd=="updateDataG")o=a.data,chrome.storage.local.set({dataG:JSON.stringify(a.data)},function(){console.log("Datos almacenados en el localStorage del background:")});else if(a.cmd==t.ELEMENT_ACTION)a.data.status=="sending"?chrome.tabs.query({url:["https://ahiseve.vercel.app/*","http://localhost:4321/*"]},d=>{d.forEach(i=>{n(i.id,{cmd:a.cmd,data:a.data})})}):n(parseInt(o.tabId),{cmd:a.cmd,data:{...a.data,idNumber:o.imgNumber}});else if(a.cmd==t.CHECK_ELEMENT_VIDEO_SELECTED){let d={selected:!1};Object.keys(o).length!=0&&(d={selected:!0}),n(e.tab.id,{cmd:t.RESULT_CHECK_ELEMENT_VIDEO_SELECTED,data:d})}else if(a.cmd==t.GET_TABS){const d=await s();c({...a,cmd:t.RESULT_TABS,data:d})}else a.cmd==t.GET_VIDEOS_DATA?l(a.data.tabId,{...a,myTabId:e.tab.id}):a.cmd==t.RESULT_VIDEOS_DATA&&n(a.myTabId,{...a,cmd:t.RESULT_VIDEOS_DATA,data:a.data});c({data:"no se encontro coincidencia"})}),!0});
